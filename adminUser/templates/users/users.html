{% extends "baseUsers.html" %} {% load static %} {% block datas %}
<section class="">
  <div>
    <div class="top-areas">
      <h2>Usuarios Registrados</h2>
    </div>
    <table class="w-full flex flex-col text-sm">
      <tr class="flex flex-row justify-between">
        <th class="w-[13.5%]">Usuario</th>
        <th class="w-[13.5%]">Area</th>
        <th class="w-[13.5%]">Nombre</th>
        <th class="w-[13.5%]">Correo</th>
        <th class="w-[13.5%]">Staff</th>
        <th class="w-[13.5%]">Estado</th>
        <th class="w-[13.5%]"></th>
      </tr>
      {% for user in users %}
      <tr class="flex flex-row w-full justify-between">
        {% if user.area %}
          <td class="w-[13.5%]">{{ user.username }}</td>
          <td class="w-[13.5%]">{{ user.area }}</td>
          <td class="w-[18%]">{{ user.first_name }} {{user.last_name}}</td>
          <td class="w-[22%]">{{ user.email }}</td>
          <td class="w-[9%]">
              {% if user.is_staff %}
                Administrador
              {% else %}
                Usuario
              {% endif %}
          </td>
          <td class="w-[5%]">
            {% if user.is_active %}
                Activo
            {% else %}
                Inactivo
            {% endif %}
          </td>
          <td class="w-[5%]">
            <a href="{% url 'updateUser' user.id%}">
              {% include "icons/editUser.html" %}
            </a>
          </td>
        {% endif %}
      </tr>
      {% endfor %}
    </table>
  </div>

  <div>
    <h2>Crear nuevo Usuario</h2>
    <form method="POST">
      {% csrf_token %} {{formUser.as_p}}
      <button type="submit">Crear Usuario</button>
    </form>
    {% if errors %}
    <ul class="errorlist">
      {% for field, error_list in errors.items %}
      <li>
        <strong>{{ field }}:</strong>
        <ul>
          {% for error in error_list %}
          <li>{{ error }}</li>
          {% endfor %}
        </ul>
      </li>
      {% endfor %}
    </ul>
    {% endif %}
  </div>
</section>

{% endblock datas %}
